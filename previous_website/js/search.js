// Copyright (C) 2015
var searchFunc=function(t,e,r){function n(t){return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/<style([\s\S]*?)<\/style>/gi,"")).replace(/<script([\s\S]*?)<\/script>/gi,"")).replace(/<figure([\s\S]*?)<\/figure>/gi,"")).replace(/<\/div>/gi,"\n")).replace(/<\/li>/gi,"\n")).replace(/<li>/gi,"  *  ")).replace(/<\/ul>/gi,"\n")).replace(/<\/p>/gi,"\n")).replace(/<br\s*[\/]?>/gi,"\n")).replace(/<[^>]+>/gi,"")}function i(t){var e,r,n=[];for(e=0;e<t.length;e++)for(r=e+1;r<t.length+1;r++)n.push(t.slice(e,r).join(" "));return n}$.ajax({url:t,dataType:"xml",success:function(t){var l=$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("link",this).attr("href")}}).get(),s=document.getElementById(e);if(s){var a=document.getElementById(r);s.addEventListener("input",function(){var t=[],e=i(this.value.trim().toLowerCase().split(" ")).sort(function(t,e){return e.split(" ").length-t.split(" ").length});if(a.innerHTML="",!(this.value.trim().length<=0)){l.forEach(function(r){var i=0;r.title&&""!==r.title.trim()||(r.title="Untitled");var l=r.title.trim().toLowerCase(),s=n(r.content.trim()),a=r.url,c=-1,u=-1,o=-1;if(""!==s&&e.forEach(function(t){c=l.indexOf(t),u=s.indexOf(t),(c>=0||u>=0)&&(i+=1,u<0&&(u=0),o<0&&(o=u))}),i>0){var f={};if(f.rank=i,f.str="<li><a href='"+a+"' class='search-result-title'>"+l+"</a>",o>=0){var g=o-20,p=o+80;g<0&&(g=0),0==g&&(p=100),p>s.length&&(p=s.length);var h=s.substr(g,p),v=new RegExp(e.join("|"),"gi");h=h.replace(v,function(t){return'<em class="search-keyword">'+t+"</em>"}),f.str+='<p class="search-result">'+h+"...</p>"}f.str+="</li>",t.push(f)}}),t.sort(function(t,e){return e.rank-t.rank});for(var r='<ul class="search-result-list">',s=0;s<t.length;s++)r+=t[s].str;r+="</ul>",a.innerHTML=r}})}}})};